{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VColorPickerEdit.css\";\n\n// Components\nimport { VBtn } from \"../VBtn/index.mjs\"; // Utilities\nimport { computed } from 'vue';\nimport { defineComponent, useRender } from \"../../util/index.mjs\";\nimport { modes } from \"./util/index.mjs\"; // Types\nconst VColorPickerInput = _ref => {\n  let {\n    label,\n    ...rest\n  } = _ref;\n  return _createVNode(\"div\", {\n    \"class\": \"v-color-picker-edit__input\"\n  }, [_createVNode(\"input\", rest, null), _createVNode(\"span\", null, [label])]);\n};\nexport const VColorPickerEdit = defineComponent({\n  name: 'VColorPickerEdit',\n  props: {\n    color: Object,\n    disabled: Boolean,\n    mode: {\n      type: String,\n      default: 'rgba',\n      validator: v => Object.keys(modes).includes(v)\n    },\n    modes: {\n      type: Array,\n      default: () => Object.keys(modes),\n      validator: v => Array.isArray(v) && v.every(m => Object.keys(modes).includes(m))\n    }\n  },\n  emits: {\n    'update:color': color => true,\n    'update:mode': mode => true\n  },\n  setup(props, _ref2) {\n    let {\n      emit\n    } = _ref2;\n    const enabledModes = computed(() => {\n      return props.modes.map(key => ({\n        ...modes[key],\n        name: key\n      }));\n    });\n    const inputs = computed(() => {\n      var _mode$inputs;\n      const mode = enabledModes.value.find(m => m.name === props.mode);\n      if (!mode) return [];\n      const color = props.color ? mode.to(props.color) : {};\n      return (_mode$inputs = mode.inputs) == null ? void 0 : _mode$inputs.map(_ref3 => {\n        let {\n          getValue,\n          getColor,\n          ...inputProps\n        } = _ref3;\n        return {\n          ...mode.inputProps,\n          ...inputProps,\n          disabled: props.disabled,\n          value: getValue(color),\n          onChange: e => {\n            const target = e.target;\n            if (!target) return;\n            emit('update:color', mode.from(getColor(color, target.value)));\n          }\n        };\n      });\n    });\n    useRender(() => {\n      var _inputs$value;\n      return _createVNode(\"div\", {\n        \"class\": \"v-color-picker-edit\"\n      }, [(_inputs$value = inputs.value) == null ? void 0 : _inputs$value.map(props => _createVNode(VColorPickerInput, props, null)), enabledModes.value.length > 1 && _createVNode(VBtn, {\n        \"icon\": \"$unfold\",\n        \"size\": \"x-small\",\n        \"variant\": \"plain\",\n        \"onClick\": () => {\n          const mi = enabledModes.value.findIndex(m => m.name === props.mode);\n          emit('update:mode', enabledModes.value[(mi + 1) % enabledModes.value.length].name);\n        }\n      }, null)]);\n    });\n    return {};\n  }\n});","map":{"version":3,"names":["VBtn","computed","defineComponent","useRender","modes","VColorPickerInput","_ref","label","rest","_createVNode","VColorPickerEdit","name","props","color","Object","disabled","Boolean","mode","type","String","default","validator","v","keys","includes","Array","isArray","every","m","emits","setup","_ref2","emit","enabledModes","map","key","inputs","_mode$inputs","value","find","to","_ref3","getValue","getColor","inputProps","onChange","e","target","from","_inputs$value","length","onClick","mi","findIndex"],"sources":["../../../src/components/VColorPicker/VColorPickerEdit.tsx"],"sourcesContent":["// Styles\nimport './VColorPickerEdit.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\n\n// Utilities\nimport { computed } from 'vue'\nimport { defineComponent, useRender } from '@/util'\nimport { modes } from './util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { HSV } from '@/util/colorUtils'\n\nconst VColorPickerInput = ({ label, ...rest }: any) => {\n  return (\n    <div\n      class=\"v-color-picker-edit__input\"\n    >\n      <input {...rest} />\n      <span>{ label }</span>\n    </div>\n  )\n}\n\nexport const VColorPickerEdit = defineComponent({\n  name: 'VColorPickerEdit',\n\n  props: {\n    color: Object as PropType<HSV | null>,\n    disabled: Boolean,\n    mode: {\n      type: String,\n      default: 'rgba',\n      validator: (v: string) => Object.keys(modes).includes(v),\n    },\n    modes: {\n      type: Array as PropType<string[]>,\n      default: () => Object.keys(modes),\n      validator: (v: any) => Array.isArray(v) && v.every(m => Object.keys(modes).includes(m)),\n    },\n  },\n\n  emits: {\n    'update:color': (color: HSV) => true,\n    'update:mode': (mode: string) => true,\n  },\n\n  setup (props, { emit }) {\n    const enabledModes = computed(() => {\n      return props.modes.map(key => ({ ...modes[key], name: key }))\n    })\n\n    const inputs = computed(() => {\n      const mode = enabledModes.value.find(m => m.name === props.mode)\n\n      if (!mode) return []\n\n      const color = props.color ? mode.to(props.color) : {}\n\n      return mode.inputs?.map(({ getValue, getColor, ...inputProps }) => {\n        return {\n          ...mode.inputProps,\n          ...inputProps,\n          disabled: props.disabled,\n          value: getValue(color),\n          onChange: (e: InputEvent) => {\n            const target = e.target as HTMLInputElement | null\n\n            if (!target) return\n\n            emit('update:color', mode.from(getColor(color, target.value)))\n          },\n        }\n      })\n    })\n\n    useRender(() => (\n      <div\n        class=\"v-color-picker-edit\"\n      >\n        { inputs.value?.map(props => (\n          <VColorPickerInput {...props} />\n        )) }\n        { enabledModes.value.length > 1 && (\n          <VBtn\n            icon=\"$unfold\"\n            size=\"x-small\"\n            variant=\"plain\"\n            onClick={ () => {\n              const mi = enabledModes.value.findIndex(m => m.name === props.mode)\n\n              emit('update:mode', enabledModes.value[(mi + 1) % enabledModes.value.length].name)\n            } }\n          />\n        ) }\n      </div>\n    ))\n\n    return {}\n  },\n})\n\nexport type VColorPickerEdit = InstanceType<typeof VColorPickerEdit>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}